---
- name: get kernal
  command: uname -r
  register: command_output

- name: set kernal
  set_fact:
    kernal: "{{command_output.stdout}}"

- name: get ubuntu codename
  command: lsb_release -cs
  register: command_output

- name: set ubuntu codename
  set_fact:
    lsb_release: "{{command_output.stdout}}"

- name: add dockerâ€™s official GPG key
  apt_key:
    url: https://yum.dockerproject.org/gpg

- name: add docker repository
  apt_repository:
    repo: deb http://apt.dockerproject.org/repo/ ubuntu-{{ lsb_release }} main

- name: install docker
  become: yes
  apt: name=docker-engine state=latest